plugins {
  id 'org.jetbrains.kotlin.multiplatform' version '1.3.40'
}

repositories { mavenCentral() }

kotlin {
  mingwX64()
  linuxX64()

  sourceSets {
    mingwX64Main.kotlin.srcDirs +=file('src/main/win')
    linuxX64Main.kotlin.srcDirs +=file('src/main/linux')
  }

  mingwX64 {
    binaries {
      executable {
        entryPoint 'org.duangsuse.securedesktop'
        linkerOpts "-Wl,--subsystem,windows" }
    }
  }

  linuxX64 {
    binaries {
      executable {
        entryPoint 'org.duangsuse.securedesktop.linux' }
    }
  }
}

